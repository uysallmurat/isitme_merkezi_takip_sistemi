{% load static %}
   <!-- Yeni Randevu Ekleme Modal -->
   <div id="newAppointmentModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Yeni Randevu Ekle</h2>
            <span class="close" onclick="closeNewAppointmentModal()">&times;</span>
        </div>
        <div class="modal-body">
            <form id="newAppointmentForm">
                {% csrf_token %}
                <div class="form-group">
                    <label for="patientSelect">Hasta *</label>
                    <select id="patientSelect" name="patient" required>
                        <option value="">Hasta seçin...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="appointmentDate">Tarih *</label>
                    <input type="date" id="appointmentDate" name="appointment_date" required>
                </div>
                <div class="form-group">
                    <label for="appointmentTime">Saat *</label>
                    <input type="time" id="appointmentTime" name="appointment_time" required>
                </div>
                <div class="form-group">
                    <label for="appointmentType">Randevu Türü *</label>
                    <select id="appointmentType" name="appointment_type" required>
                        <option value="">Tür seçin...</option>
                        <option value="consultation">Konsültasyon</option>
                        <option value="hearing_test">İşitme Testi</option>
                        <option value="device_fitting">Cihaz Uygulaması</option>
                        <option value="follow_up">Kontrol</option>
                        <option value="maintenance">Bakım</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notes">Notlar</label>
                    <textarea id="notes" name="notes" rows="3" placeholder="Randevu ile ilgili notlar..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeNewAppointmentModal()" class="btn-secondary">İptal</button>
                    <button type="submit" class="btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Randevu Görüntüleme Modal -->
<div id="viewAppointmentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fa-solid fa-eye"></i> Randevu Detayları</h2>
            <button type="button" class="close" onclick="closeViewAppointmentModal()">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="detail-grid">
                <div class="detail-item">
                    <label>Randevu ID:</label>
                    <span id="viewAppointmentId">-</span>
                </div>
                <div class="detail-item">
                    <label>Hasta:</label>
                    <span id="viewAppointmentPatient">-</span>
                </div>
                <div class="detail-item">
                    <label>Tarih:</label>
                    <span id="viewAppointmentDate">-</span>
                </div>
                <div class="detail-item">
                    <label>Saat:</label>
                    <span id="viewAppointmentTime">-</span>
                </div>
                <div class="detail-item">
                    <label>Randevu Türü:</label>
                    <span id="viewAppointmentType">-</span>
                </div>
                <div class="detail-item">
                    <label>Durum:</label>
                    <span id="viewAppointmentStatus" class="status-badge">-</span>
                </div>
                <div class="detail-item full-width">
                    <label>Notlar:</label>
                    <span id="viewAppointmentNotes">-</span>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-secondary" onclick="closeViewAppointmentModal()">
                <i class="fa-solid fa-times"></i> Kapat
            </button>
        </div>
    </div>
</div>

<!-- Randevu Düzenleme Modal -->
<div id="editAppointmentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fa-solid fa-edit"></i> Randevu Düzenle</h2>
            <button type="button" class="close" onclick="closeEditAppointmentModal()">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <form id="editAppointmentForm" onsubmit="event.preventDefault(); submitEditAppointment();">
            {% csrf_token %}
            <input type="hidden" name="appointment_id" id="editAppointmentId">
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editAppointmentPatient">Hasta *</label>
                        <select name="patient" id="editAppointmentPatient" required>
                            <option value="">Hasta Seçin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentDate">Randevu Tarihi *</label>
                        <input type="date" name="appointment_date" id="editAppointmentDate" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editAppointmentTime">Randevu Saati *</label>
                        <input type="time" name="appointment_time" id="editAppointmentTime" required>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentType">Randevu Türü</label>
                        <select name="appointment_type" id="editAppointmentType">
                            <option value="consultation">Konsültasyon</option>
                            <option value="hearing_test">İşitme Testi</option>
                            <option value="device_fitting">Cihaz Uygulaması</option>
                            <option value="follow_up">Kontrol</option>
                            <option value="maintenance">Bakım</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editAppointmentStatus">Durum</label>
                        <select name="status" id="editAppointmentStatus">
                            <option value="scheduled">Planlandı</option>
                            <option value="completed">Tamamlandı</option>
                            <option value="cancelled">İptal Edildi</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editAppointmentNotes">Notlar</label>
                    <textarea name="notes" id="editAppointmentNotes" rows="3" placeholder="Randevu notları..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeEditAppointmentModal()">
                    <i class="fa-solid fa-times"></i> İptal
                </button>
                <button type="submit" class="btn-primary">
                    <i class="fa-solid fa-save"></i> Güncelle
                </button>
            </div>
        </form>
    </div>
</div>